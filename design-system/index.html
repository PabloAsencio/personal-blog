<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Design System</title>
        <link rel="stylesheet" href="../styles/main.css" />
    </head>
    <body>
        <header class="header">
            <p>
                <a href="#main" class="header__skip-link">
                    Skip to Content (Press Enter)
                </a>
            </p>
            <nav class="navigation__nav">
                <div class="navigation__slide">
                    <button
                        type="button"
                        class="navigation__button--open"
                        aria-label="Open navigation menu"
                        aria-controls="navigation-content"
                        aria-expanded="false"
                    >
                        <svg
                            class="icon navigation__icon-menu"
                            aria-hidden="true"
                            focusable="false"
                        >
                            <use
                                xlink:href="../images/sprite.svg#icon-menu"
                            ></use>
                        </svg>
                    </button>
                    <div class="navigation__slide-out">
                        <button
                            class="navigation__button--close"
                            aria-label="Close navigation menu"
                        >
                            <svg
                                class="icon navigation__icon-cross"
                                aria-hidden="true"
                                focusable="false"
                            >
                                <use
                                    xlink:href="../images/sprite.svg#icon-cross"
                                ></use>
                            </svg>
                        </button>
                        <div id="navigation-content">
                            <ul>
                                <li>
                                    <a
                                        href="../index.html"
                                        class="navigation__item"
                                        >Home</a
                                    >
                                </li>
                                <li>
                                    <a
                                        href="../about.html"
                                        class="navigation__item"
                                        >About</a
                                    >
                                </li>
                                <li>
                                    <a
                                        href="../contact.html"
                                        class="navigation__item"
                                        >Contact</a
                                    >
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <form class="navigation__search">
                    <label for="search-bar" class="screen-reader-only"
                        >Search:
                    </label>
                    <input
                        class="navigation__search-bar"
                        type="search"
                        name="search"
                        id="search-bar"
                        placeholder="Search"
                    />
                    <button
                        type="submit"
                        class="navigation__button-search"
                        aria-label="Search"
                    >
                        <svg
                            class="icon navigation__icon-search"
                            aria-hidden="true"
                            focusable="false"
                        >
                            <use
                                xlink:href="../images/sprite.svg#icon-search"
                            ></use>
                        </svg>
                    </button>
                </form>
            </nav>
        </header>
        <main id="main">
            <header>
                <h1>Design System</h1>
            </header>
            <section>
                <h2>Typography</h2>
                <h3>Headings</h3>
                <ol>
                    <li><h1>Heading 1</h1></li>
                    <li><h2>Heading 2</h2></li>
                    <li><h3>Heading 3</h3></li>
                </ol>
                <h3>Paragraph</h3>
                <p>
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit.
                    Odio quaerat modi delectus. Ipsam quos possimus maxime nam
                    in sequi iure architecto ullam eos minus laboriosam unde,
                    aspernatur a voluptatibus cum. Lorem ipsum dolor sit amet
                    consectetur adipisicing elit. Id rerum magni accusamus
                    reiciendis. Corporis ipsa dicta adipisci. Facilis autem
                    perferendis consectetur, soluta numquam ullam laboriosam
                    maiores quas exercitationem pariatur iure?
                </p>
                <p>
                    Lorem ipsum dolor sit amet consectetur adipisicing elit.
                    Praesentium provident officia nisi consequuntur.
                    Reprehenderit nulla velit sequi quis minima delectus rem
                    nesciunt deserunt culpa eius aliquid, quasi accusantium,
                    minus laboriosam? Lorem ipsum dolor sit amet consectetur,
                    adipisicing elit. Maiores, vero ut laborum non facilis
                    doloribus blanditiis doloremque pariatur nisi,
                    reprehenderit, sequi assumenda? Nulla quisquam magnam ipsam
                    corporis eius minus beatae.
                </p>
                <h2>Cards</h2>
                <article class="card">
                    <header class="card__header">
                        <div class="card__info">
                            <p class="card__type">Popular post</p>
                            <p>
                                <time class="card__date" datetime="2020-05-16">
                                    May 16, 2020
                                </time>
                            </p>
                        </div>
                        <div class="card__heading-wrapper">
                            <img
                                class="card__thumbnail"
                                src="https://via.placeholder.com/150x150?text=Post+Thumbnail"
                                alt="Post thumbnail"
                            />
                            <div class="card__heading">
                                <h3 class="card__title">
                                    <a href="posts/post04.html">Post title</a>
                                </h3>
                                <p class="card__author">
                                    <a href="#">Author Name</a>
                                </p>
                            </div>
                        </div>
                    </header>
                    <p class="card__text">
                        Lorem ipsum dolor sit, amet consectetur adipisicing
                        elit. Alias asperiores rem totam, ullam eveniet
                        molestias quisquam soluta. Amet accusantium
                        voluptatibus, placeat dicta asperiores dolor. Expedita
                        quibusdam mollitia voluptatem minus molestias!
                    </p>
                    <footer>
                        <p class="card__cta">
                            <a href="posts/post04.html"
                                >Keep reading
                                <span class="screen-reader-only"
                                    >the blog post 1</span
                                ></a
                            >
                        </p>
                        <ul class="card__tag-area">
                            <li class="card__tag">
                                <a href="#" rel="tag">Tag 1</a>
                            </li>
                            <li class="card__tag">
                                <a href="#" rel="tag">Tag 2</a>
                            </li>
                            <li class="card__tag">
                                <a href="#" rel="tag">Tag 3</a>
                            </li>
                        </ul>
                    </footer>
                </article>
            </section>
            <footer>
                <nav>
                    <ul>
                        <li>
                            <a href="../index.html">Home</a>
                        </li>
                        <li><a href="../about.html">About</a></li>
                        <li><a href="../contact.html">Contact</a></li>
                    </ul>
                </nav>
                <p>Follow us on social media</p>
                <ul>
                    <li><a href="#">Facebook</a></li>
                    <li><a href="#">Twitter</a></li>
                    <li><a href="#">LinkedIn</a></li>
                </ul>
                <p><small>&copy; Pablo Asencio SÃ¡nchez 2020</small></p>
            </footer>
        </main>
        <script>
            const openButton = document.querySelector(
                '.navigation__button--open'
            );
            const slideOut = document.querySelector('.navigation__slide-out');
            const closeButton = document.querySelector(
                '.navigation__button--close'
            );
            const main = document.querySelector('main');
            const firstFocusableElement = closeButton;
            const links = slideOut.getElementsByTagName('a');
            const lastFocusableElement = links[links.length - 1];

            openButton.addEventListener('click', openNavigation);
            closeButton.addEventListener('click', closeNavigation);
            slideOut.addEventListener('keyup', closeNavigation);
            firstFocusableElement.addEventListener(
                'keydown',
                moveFocusToBottom
            );
            lastFocusableElement.addEventListener('keydown', moveFocusToTop);

            function openNavigation() {
                slideOut.classList.add('visible', 'active');
                setTimeout(function () {
                    firstFocusableElement.focus();
                }, 1);
                main.setAttribute('aria-hidden', 'true');
                openButton.setAttribute('aria-hidden', 'true');
            }

            function closeNavigation(e) {
                if (e.type == 'keyup' && e.key !== 'Escape') {
                    return;
                }

                slideOut.classList.remove('active');
                main.removeAttribute('aria-hidden');
                openButton.removeAttribute('aria-hidden');
                setTimeout(function () {
                    openButton.focus();
                }, 1);
                setTimeout(function () {
                    slideOut.classList.remove('visible');
                }, 501);
            }

            function moveFocusToTop(e) {
                if (e.key === 'Tab' && !e.shiftKey) {
                    e.preventDefault();
                    firstFocusableElement.focus();
                }
            }

            function moveFocusToBottom(e) {
                if (e.key === 'Tab' && e.shiftKey) {
                    e.preventDefault();
                    lastFocusableElement.focus();
                }
            }
        </script>
    </body>
</html>
